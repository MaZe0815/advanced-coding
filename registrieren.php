<?php require_once('config.php'); ?><!DOCTYPE html><html>    <head>        <?php include 'inc/inc-meta.php'; ?>        <?php        $set_meta_tags = new set_meta_tags();        $set_meta_tags->seo_array['title'] = "Registrieren - Shop";        $set_meta_tags->seo_array['description'] = "Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa.";        $set_meta_tags->seo_array['keywords'] = "Lorem, ipsum, dolor, sit, amet, consectetuer, adipiscin, elit, Aenean commodo";        $set_meta_tags->seo_array['index_allow'] = false;        $set_meta_tags->set_meta_tags_index(true);        ?>    </head>    <body>        <?php include 'inc/inc-header.php'; ?>        <div class="content">            <div class="haeder_logo">                <img src="<?php echo HTTP_HOST . ROOT_URL . PROJECT_NAME; ?>/img/register-login.jpg" alt="Registrieren">            </div>            <div class="container">                <div class="wrapper">                    <h1>Registrieren</h1>                    <div class="row">                        <div class="col-12">                            <p>Registrieren Sie sich ein und erhalten Sie Zugang zu unserem Onlineshop.</p>                            <hr>                        </div>                    </div>                    <div class="row">                        <div class="col-4">                            <?php                            // Pr&uuml;fung Registrierungsdaten auf Fehler                            if (isset($_POST['gesendet']) && $_POST['gesendet'] == 1) {                                $fehler = array();                                if ($_POST['username'] == '' || filter_var($_POST['username'], FILTER_VALIDATE_EMAIL) === false) {                                    $fehler['username'] = 'Bitte geben Sie Ihre E-Mailadresse als Benutzernamen ein.';                                }                                if ($_POST['password'] == '') {                                    $fehler['password'] = 'Bitte vergeben Sie ein Passwort.';                                }                                if ($_POST['password'] != $_POST['password2']) {                                    $fehler['password_uebereinstimmung'] = 'Die Passw&ouml;rter stimmen nicht &uuml;berein.';                                }                                if ($_POST['anrede'] == '') {                                    $fehler['anrede'] = 'Bitte w&auml;hlen Sie Ihre Anrede.';                                }                                if ($_POST['vorname'] == '') {                                    $fehler['vorname'] = 'Bitte geben Sie Ihren Vornamen an.';                                }                                if ($_POST['nachname'] == '') {                                    $fehler['nachname'] = 'Bitte geben Sie Ihren Nachnamen an.';                                }                                if ($_POST['strasse'] == '') {                                    $fehler['strasse'] = 'Bitte geben Sie Ihre Strasse an.';                                }                                if ($_POST['plz'] == '') {                                    $fehler['plz'] = 'Bitte geben Sie Ihre Postleitzahl an.';                                }                                if ($_POST['stadt'] == '') {                                    $fehler['stadt'] = 'Bitte geben Sie Ihre Stadt an.';                                }                                if (!isset($_POST['daten'])) {                                    $fehler['daten'] = 'Bitte best&auml;tigen Sie die Datenschutzbestimmungen.';                                }                                $verbindung = mysqli_connect(DB_HOST, DB_USER, DB_PASS, DB_NAME);                                $query = "SELECT id from acs_userlegitimation WHERE username='" . $_POST['username'] . "'";                                $result = mysqli_query($verbindung, $query);                                while ($row = mysqli_fetch_array($result)) {                                    $fehler['username'] = 'Dieser Benutzername ist bereits vergeben.';                                }                            }                            ?>                            <?php                            // Best&auml;tigung und Useranlage wenn Registrierungsdaten g&uuml;ltig                            if (isset($fehler) && count($fehler) == 0) {                                // Speichern der Registrierung                                $verbindung = mysqli_connect(DB_HOST, DB_USER, DB_PASS, DB_NAME);                                $verbindung->set_charset("utf8");                                $pwhash = password_hash($_POST['password'], PASSWORD_BCRYPT);                                $query = "INSERT INTO acs_userlegitimation (username, password_hash, anrede, vorname, nachname, strasse, plz, stadt) VALUES ('" . $_POST['username'] . "','" . $pwhash . "','" . $_POST['anrede'] . "','" . $_POST['vorname'] . "','" . $_POST['nachname'] . "','" . $_POST['strasse'] . "','" . $_POST['plz'] . "','" . $_POST['stadt'] . "')";                                mysqli_query($verbindung, $query);                                // Ausgabe Registrierungsbest&auml;tigung                                echo("<div class='zeilenwrapper'>");                                echo("Sie haben sich erfolgreich registriert:");                                echo("</div>");                                echo("<div class='zeilenwrapper'>");                                echo("<strong>Ihr Benutzername:</strong>" . " " . $_POST['username']);                                echo("</div>");                                echo("<div class='zeilenwrapper'>");                                echo("<div style='margin-top: 35px; margin-bottom: 150px;'>Klicken Sie <a href='" . HTTP_HOST . ROOT_URL . PROJECT_NAME . "/login'>hier</a>, um sich direkt in unserem Online-Shop einzuloggen!</div>");                                echo("</div>");                            }                            // Ausgabe Formular wenn keine Registrierungsdaten oder Registrierungsdaten ung&uuml;ltig                            if (!isset($fehler) || count($fehler) > 0) {                                echo("<form action='" . HTTP_HOST . ROOT_URL . PROJECT_NAME . "/registrieren/' method='post'>");                                echo("<input type='hidden' name='gesendet' value='1'>");                                echo("<div class='zeilenwrapper'>");                                echo("<div class='zellelinks'>");                                echo("<label for='username'>Ihre E-Mailadresse</label>");                                echo("</div>");                                echo("<div class='zellerechts'>");                                echo("<input class='eingabefeld");                                if (isset($fehler['username'])) {                                    echo(" fehler");                                }                                echo("' placeholder='E-Mail Adresse*'");                                echo(" type='text' ");                                if (isset($_POST['username'])) {                                    echo("value='" . $_POST['username'] . "'");                                }                                echo(" name='username'>");                                echo("</div>");                                echo("</div>");                                if (isset($fehler['username'])) {                                    echo("<div class='zeilenwrapper'>");                                    echo("<div class='fehlerzelle'>" . $fehler['username'] . "</div>");                                    echo("</div>");                                }                                echo("<div class='zeilenwrapper'>");                                echo("<div class='zellelinks'>");                                echo("<label for='password'>Gew&uuml;nschtes Passwort</label>");                                echo("</div>");                                echo("<div class='zellerechts'>");                                echo("<input class='eingabefeld");                                if (isset($fehler['password']) || isset($fehler['password_uebereinstimmung'])) {                                    echo(" fehler");                                }                                echo("' placeholder='Gew&uuml;nschtes Passwort*'");                                echo(" type='password'  ");                                if (isset($_POST['password'])) {                                    echo("value='" . $_POST['password'] . "'");                                }                                echo(" name='password'>");                                echo("</div>");                                echo("</div>");                                if (isset($fehler['password'])) {                                    echo("<div class='zeilenwrapper'>");                                    echo("<div class='fehlerzelle'>" . $fehler['password'] . "</div>");                                    echo("</div>");                                }                                echo("<div class='zeilenwrapper'>");                                echo("<div class='zellelinks'>");                                echo("<label for='password2'>Wiederholung Passwort</label>");                                echo("</div>");                                echo("<div class='zellerechts'>");                                echo("<input class='eingabefeld");                                if (isset($fehler['password_uebereinstimmung'])) {                                    echo(" fehler");                                }                                echo("' placeholder='Wiederholung Passwort*' ");                                echo(" type='password'  ");                                if (isset($_POST['password2'])) {                                    echo("value='" . $_POST['password2'] . "'");                                }                                echo(" name='password2'>");                                echo("</div>");                                echo("</div>");                                if (isset($fehler['password_uebereinstimmung'])) {                                    echo("<div class='zeilenwrapper'>");                                    echo("<div class='fehlerzelle'>" . $fehler['password_uebereinstimmung'] . "</div>");                                    echo("</div>");                                }// ---  anrede                                echo("<div class='zeilenwrapper'>");                                echo("<div class='zellelinks'>");                                echo("<label for='anrede'>Anrede</label>");                                echo("</div>");                                echo("<div class='zellerechts'>");                                echo("<select class='eingabefeld");                                if (isset($fehler['anrede'])) {                                    echo(" fehler");                                }                                echo("' name='anrede'>");                                echo("<option value=''>Bitte w&auml;hlen</option>");                                echo("<option value='w'");                                if (isset($_POST['anrede']) && $_POST['anrede'] == 'w') {                                    echo(" selected ");                                } echo(">Frau</option>");                                echo("<option value='m'");                                if (isset($_POST['anrede']) && $_POST['anrede'] == 'm') {                                    echo(" selected ");                                } echo(">Herr</option>");                                echo("</select>");                                echo("</div>");                                echo("</div>");                                if (isset($fehler['anrede'])) {                                    echo("<div class='zeilenwrapper'>");                                    echo("<div class='fehlerzelle'>" . $fehler['anrede'] . "</div>");                                    echo("</div>");                                }// -- vorname                                echo("<div class='zeilenwrapper'>");                                echo("<div class='zellelinks'>");                                echo("<label for='vorname'>Vorname</label>");                                echo("</div>");                                echo("<div class='zellerechts'>");                                echo("<input type='text' placeholder='Ihr Vorname*' class='eingabefeld");                                if (isset($fehler['vorname'])) {                                    echo(" fehler");                                }                                echo("' name='vorname'");                                if (isset($_POST['vorname'])) {                                    echo(" value='" . $_POST['vorname'] . "'");                                }                                echo(">");                                echo("</div>");                                echo("</div>");                                if (isset($fehler['vorname'])) {                                    echo("<div class='zeilenwrapper'>");                                    echo("<div class='fehlerzelle'>" . $fehler['vorname'] . "</div>");                                    echo("</div>");                                }// -- nachname                                echo("<div class='zeilenwrapper'>");                                echo("<div class='zellelinks'>");                                echo("<label for='nachname'>Nachname</label>");                                echo("</div>");                                echo("<div class='zellerechts'>");                                echo("<input type='text' placeholder='Ihr Nachname*' class='eingabefeld");                                if (isset($fehler['nachname'])) {                                    echo(" fehler");                                }                                echo("' name='nachname'");                                if (isset($_POST['nachname'])) {                                    echo(" value='" . $_POST['nachname'] . "'");                                }                                echo(">");                                echo("</div>");                                echo("</div>");                                if (isset($fehler['nachname'])) {                                    echo("<div class='zeilenwrapper'>");                                    echo("<div class='fehlerzelle'>" . $fehler['nachname'] . "</div>");                                    echo("</div>");                                }// -- strasse                                echo("<div class='zeilenwrapper'>");                                echo("<div class='zellelinks'>");                                echo("<label for='strasse'>Stra&szlig;e und Hausnr.</label>");                                echo("</div>");                                echo("<div class='zellerechts'>");                                echo("<input type='text' placeholder='Ihre Stra&szlig;e und Hausnr.*' class='eingabefeld");                                if (isset($fehler['strasse'])) {                                    echo(" fehler");                                }                                echo("' name='strasse'");                                if (isset($_POST['strasse'])) {                                    echo(" value='" . $_POST['strasse'] . "'");                                }                                echo(">");                                echo("</div>");                                echo("</div>");                                if (isset($fehler['strasse'])) {                                    echo("<div class='zeilenwrapper'>");                                    echo("<div class='fehlerzelle'>" . $fehler['strasse'] . "</div>");                                    echo("</div>");                                }// -- plz                                echo("<div class='zeilenwrapper'>");                                echo("<div class='zellelinks'>");                                echo("<label for='plz'>PLZ</label>");                                echo("</div>");                                echo("<div class='zellerechts'>");                                echo("<input type='text' placeholder='Ihre Postleitzahl*' class='eingabefeld");                                if (isset($fehler['plz'])) {                                    echo(" fehler");                                }                                echo("' name='plz'");                                if (isset($_POST['plz'])) {                                    echo(" value='" . $_POST['plz'] . "'");                                }                                echo(">");                                echo("</div>");                                echo("</div>");                                if (isset($fehler['plz'])) {                                    echo("<div class='zeilenwrapper'>");                                    echo("<div class='fehlerzelle'>" . $fehler['plz'] . "</div>");                                    echo("</div>");                                }// -- stadt                                echo("<div class='zeilenwrapper'>");                                echo("<div class='zellelinks'>");                                echo("<label for='stadt'>Stadt</label>");                                echo("</div>");                                echo("<div class='zellerechts'>");                                echo("<input type='text' placeholder='Ihre Stadt*' class='eingabefeld");                                if (isset($fehler['stadt'])) {                                    echo(" fehler");                                }                                echo("' name='stadt'");                                if (isset($_POST['stadt'])) {                                    echo(" value='" . $_POST['stadt'] . "'");                                }                                echo(">");                                echo("</div>");                                echo("</div>");                                if (isset($fehler['stadt'])) {                                    echo("<div class='zeilenwrapper'>");                                    echo("<div class='fehlerzelle'>" . $fehler['stadt'] . "</div>");                                    echo("</div>");                                }// -- datenschutz                                echo("<div class='zeilenwrapper'>");                                echo("<div class='zellerechts'>");                                echo("<input type='checkbox' name='daten' id='daten' value='1'");                                if (!isset($fehler['daten']) && isset($_POST['daten'])) {                                    echo(" checked='checked'>");                                } else {                                    echo(">");                                }                                echo("<label for='daten'");                                if (isset($fehler['daten'])) {                                    echo(" class='fehler_label'>");                                } else {                                    echo(">");                                }                                echo("Ihre Daten sind bei uns sicher. Ich habe die <a href='" . HTTP_HOST . ROOT_URL . PROJECT_NAME . "/datenschutz' target='_blank'>Datenschutzerkl&auml;rung</a> gelesen und verstanden.");                                echo("<br><br>Mit <strong>*</strong> markierte Felder sind Pflichtfelder!");                                echo("</label>");                                echo("</div>");                                echo("</div>");                                echo("<div class='zeilenwrapper'>");                                echo("<div class='zellerechts'>");                                echo("<input class='eingabefeld' type='submit' value='Jetzt registrieren!'>");                                echo("</div>");                                echo("</div>");                                echo("</form>");                                if (isset($verbindung)) {                                    mysqli_close($verbindung);                                }                            }                            ?>                        </div>                    </div>                </div>            </div>        </div>        <?php include 'inc/inc-footer.php'; ?>        <script src="<?php echo HTTP_HOST . ROOT_URL . PROJECT_NAME; ?>/js/js_functions.js" type="text/javascript"></script>        <?php include "inc/inc-debug-console.php"; ?>    </body></html>